{"version":3,"sources":["webpack:///src/app/components/flutterwavecallback/flutterwavecallback-routing.module.ts","webpack:///src/app/components/flutterwavecallback/flutterwavecallback.component.ts","webpack:///src/app/components/flutterwavecallback/flutterwavecallback.component.html","webpack:///src/app/components/flutterwavecallback/flutterwavecallback.module.ts"],"names":["routes","path","component","FlutterwavecallbackRoutingModule","forChild","imports","exports","FlutterwavecallbackComponent","route","api","util","cart","router","queryParams","subscribe","data","console","log","status","transaction_id","localStorage","getItem","deliveryAt","datetime","deliveryAddress","JSON","parse","couponadded","undefined","coupon","calcuate","createOrder","removeItem","navigate","payMethod","payKey","storeId","Set","map","item","store_id","orderStatus","forEach","element","info","id","push","notes","value","time","format","param","uid","join","date_time","add","paid_method","order_to","orders","stringify","address","driver_id","total","totalPrice","tax","orderTax","grand_total","grandTotal","delivery_charge","deliveryPrice","coupon_code","discount","pay_key","assignee","start","post","stop","createOrderNotification","stores","clearCart","publishNewOrder","error","toast","getString","selector","templateUrl","styleUrls","FlutterwavecallbackModule","declarations"],"mappings":"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","file":"components-flutterwavecallback-flutterwavecallback-module-es5.js","sourcesContent":["/*\n  Authors : initappz (Rahul Jograna)\n  Website : https://initappz.com/\n  App Name : ionic 5 groceryee app\n  Created : 10-Sep-2020\n  This App Template Source code is licensed as per the\n  terms found in the Website https://initappz.com/license\n  Copyright and Good Faith Purchasers © 2020-present initappz.\n*/\nimport { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\nimport { FlutterwavecallbackComponent } from './flutterwavecallback.component';\n\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: FlutterwavecallbackComponent\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class FlutterwavecallbackRoutingModule { }\n","/*\n  Authors : initappz (Rahul Jograna)\n  Website : https://initappz.com/\n  App Name : ionic 5 groceryee app\n  Created : 10-Sep-2020\n  This App Template Source code is licensed as per the\n  terms found in the Website https://initappz.com/license\n  Copyright and Good Faith Purchasers © 2020-present initappz.\n*/\nimport { Component, OnInit } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { CartService } from 'src/app/services/cart.service';\nimport { UtilService } from 'src/app/services/util.service';\nimport { ApiService } from 'src/app/services/api.service';\nimport * as moment from 'moment';\n@Component({\n  selector: 'app-flutterwavecallback',\n  templateUrl: './flutterwavecallback.component.html',\n  styleUrls: ['./flutterwavecallback.component.scss']\n})\nexport class FlutterwavecallbackComponent implements OnInit {\n\n  constructor(\n    private route: ActivatedRoute,\n    public api: ApiService,\n    public util: UtilService,\n    public cart: CartService,\n    private router: Router\n  ) {\n    this.route.queryParams.subscribe((data) => {\n      console.log(data);\n      if (data && data.status === 'successful') {\n        console.log(data.transaction_id);\n        console.log(localStorage.getItem('payTMOrderID'));\n        console.log('deliveryAddress===============', localStorage.getItem('deliveryAddress'));\n        this.cart.deliveryAt = localStorage.getItem('deliveryAt');\n        this.cart.datetime = localStorage.getItem('datetime');\n        console.log('date time->>>', this.cart.datetime);\n        console.log('cart--->>>', this.cart.deliveryAt, localStorage.getItem('deliveryAt'));\n        if (this.cart.deliveryAt === 'home') {\n          this.cart.deliveryAddress = JSON.parse(localStorage.getItem('deliveryAddress'));\n        }\n        const couponadded = localStorage.getItem('couponadded');\n        console.log('couponaddedcouponaddedcouponaddedcouponaddedcouponaddedcouponadded', couponadded);\n        if (couponadded && couponadded !== 'undefined' && couponadded !== undefined) {\n          this.cart.coupon = JSON.parse(couponadded);\n        }\n        this.cart.calcuate();\n        this.createOrder('flutterwave', data.transaction_id);\n      } else {\n        localStorage.removeItem('payTMOrderID');\n        localStorage.removeItem('deliveryAt');\n        localStorage.removeItem('deliveryAddress');\n        localStorage.removeItem('datetime');\n        localStorage.removeItem('couponadded');\n        this.router.navigate(['']);\n      }\n    });\n  }\n\n  ngOnInit(): void {\n  }\n\n  async createOrder(payMethod, payKey) {\n    //////////// new\n    //////////// new\n\n    const storeId = [...new Set(this.cart.cart.map(item => item.store_id))];\n    const orderStatus = [];\n    storeId.forEach(element => {\n      const info = {\n        id: element,\n        status: 'created'\n      };\n      orderStatus.push(info);\n    });\n    const notes = [\n      {\n        status: 1,\n        value: 'Order Created',\n        time: moment().format('lll'),\n      }\n    ];\n    this.cart.deliveryAt = this.cart.deliveryAt ? this.cart.deliveryAt : '';\n    const param = {\n      uid: localStorage.getItem('uid'),\n      store_id: storeId.join(),\n      date_time: this.cart.datetime === 'today' ? moment().format('YYYY-MM-DD HH:mm:ss') : moment().add(1, 'days').format('YYYY-MM-DD HH:mm:ss'),\n      paid_method: payMethod,\n      order_to: this.cart.deliveryAt,\n      orders: JSON.stringify(this.cart.cart),\n      notes: JSON.stringify(notes),\n      address: this.cart.deliveryAt === 'home' ? JSON.stringify(this.cart.deliveryAddress) : '',\n      driver_id: '',\n      total: this.cart.totalPrice,\n      tax: this.cart.orderTax,\n      grand_total: this.cart.grandTotal,\n      delivery_charge: this.cart.deliveryPrice,\n      coupon_code: this.cart.coupon ? JSON.stringify(this.cart.coupon) : '',\n      discount: this.cart.discount,\n      pay_key: payKey,\n      status: JSON.stringify(orderStatus),\n      assignee: ''\n    };\n\n    console.log('param----->', param);\n\n    this.util.start();\n    this.api.post('orders/save', param).subscribe((data: any) => {\n      console.log(data);\n      this.util.stop();\n      localStorage.removeItem('payTMOrderID');\n      localStorage.removeItem('deliveryAt');\n      localStorage.removeItem('deliveryAddress');\n      localStorage.removeItem('datetime');\n      localStorage.removeItem('couponadded');\n      this.api.createOrderNotification(this.cart.stores);\n      this.cart.clearCart();\n      this.util.publishNewOrder();\n      this.router.navigate(['orders']);\n    }, error => {\n      console.log(error);\n      this.util.stop();\n      this.util.toast('error', this.util.getString('Error'), this.util.getString('Something went wrong'));\n    });\n  }\n}\n","<!--\n   Authors : initappz (Rahul Jograna)\n  Website : https://initappz.com/\n  App Name : ionic 5 groceryee app\n  Created : 10-Sep-2020\n  This App Template Source code is licensed as per the\n  terms found in the Website https://initappz.com/license\n  Copyright and Good Faith Purchasers © 2020-present initappz.\n -->\n<h2 style=\"text-align: center;\"> {{util.getString('Please wait, we are processing your order')}} </h2>\n","/*\n  Authors : initappz (Rahul Jograna)\n  Website : https://initappz.com/\n  App Name : ionic 5 groceryee app\n  Created : 10-Sep-2020\n  This App Template Source code is licensed as per the\n  terms found in the Website https://initappz.com/license\n  Copyright and Good Faith Purchasers © 2020-present initappz.\n*/\nimport { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { FlutterwavecallbackRoutingModule } from './flutterwavecallback-routing.module';\nimport { FlutterwavecallbackComponent } from './flutterwavecallback.component';\n\n\n@NgModule({\n  declarations: [FlutterwavecallbackComponent],\n  imports: [\n    CommonModule,\n    FlutterwavecallbackRoutingModule\n  ]\n})\nexport class FlutterwavecallbackModule { }\n"]}