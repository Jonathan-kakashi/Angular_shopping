{"version":3,"sources":["webpack:///src/app/components/paytmcallback/paytmcallback-routing.module.ts","webpack:///src/app/components/paytmcallback/paytmcallback.component.ts","webpack:///src/app/components/paytmcallback/paytmcallback.component.html","webpack:///src/app/components/paytmcallback/paytmcallback.module.ts"],"names":["routes","path","component","PaytmcallbackRoutingModule","forChild","imports","exports","PaytmcallbackComponent","route","api","util","cart","router","queryParams","subscribe","data","console","log","status","localStorage","getItem","deliveryAt","datetime","deliveryAddress","JSON","parse","couponadded","undefined","coupon","calcuate","createOrder","removeItem","navigate","payMethod","payKey","storeId","Set","map","item","store_id","orderStatus","forEach","element","info","id","push","notes","value","time","format","param","uid","join","date_time","add","paid_method","order_to","orders","stringify","address","driver_id","total","totalPrice","tax","orderTax","grand_total","grandTotal","delivery_charge","deliveryPrice","coupon_code","discount","pay_key","assignee","start","post","stop","createOrderNotification","stores","clearCart","publishNewOrder","error","toast","getString","selector","templateUrl","styleUrls","PaytmcallbackModule","declarations"],"mappings":"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","file":"components-paytmcallback-paytmcallback-module-es5.js","sourcesContent":["/*\n  Authors : initappz (Rahul Jograna)\n  Website : https://initappz.com/\n  App Name : ionic 5 groceryee app\n  Created : 10-Sep-2020\n  This App Template Source code is licensed as per the\n  terms found in the Website https://initappz.com/license\n  Copyright and Good Faith Purchasers © 2020-present initappz.\n*/\nimport { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\nimport { PaytmcallbackComponent } from './paytmcallback.component';\n\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: PaytmcallbackComponent\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class PaytmcallbackRoutingModule { }\n","/*\n  Authors : initappz (Rahul Jograna)\n  Website : https://initappz.com/\n  App Name : ionic 5 groceryee app\n  Created : 10-Sep-2020\n  This App Template Source code is licensed as per the\n  terms found in the Website https://initappz.com/license\n  Copyright and Good Faith Purchasers © 2020-present initappz.\n*/\nimport { Component, OnInit } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { ApiService } from 'src/app/services/api.service';\nimport { UtilService } from 'src/app/services/util.service';\nimport { CartService } from 'src/app/services/cart.service';\nimport * as moment from 'moment';\n@Component({\n  selector: 'app-paytmcallback',\n  templateUrl: './paytmcallback.component.html',\n  styleUrls: ['./paytmcallback.component.scss']\n})\nexport class PaytmcallbackComponent implements OnInit {\n  status: any;\n  constructor(\n    private route: ActivatedRoute,\n    public api: ApiService,\n    public util: UtilService,\n    public cart: CartService,\n    private router: Router\n  ) {\n    this.route.queryParams.subscribe((data: any) => {\n      console.log(data);\n      this.status = data.status;\n      if (data && data.status === 'success') {\n        console.log(localStorage.getItem('payTMOrderID'));\n        console.log('deliveryAddress===============', localStorage.getItem('deliveryAddress'));\n        this.cart.deliveryAt = localStorage.getItem('deliveryAt');\n        this.cart.datetime = localStorage.getItem('datetime');\n        console.log('date time->>>', this.cart.datetime);\n        console.log('cart--->>>', this.cart.deliveryAt, localStorage.getItem('deliveryAt'));\n        if (this.cart.deliveryAt === 'home') {\n          this.cart.deliveryAddress = JSON.parse(localStorage.getItem('deliveryAddress'));\n        }\n        const couponadded = localStorage.getItem('couponadded');\n        console.log('couponaddedcouponaddedcouponaddedcouponaddedcouponaddedcouponadded', couponadded);\n        if (couponadded && couponadded !== 'undefined' && couponadded !== undefined) {\n          this.cart.coupon = JSON.parse(couponadded);\n        }\n        this.cart.calcuate();\n        this.createOrder('paytm', localStorage.getItem('payTMOrderID'));\n      } else {\n        localStorage.removeItem('payTMOrderID');\n        localStorage.removeItem('deliveryAt');\n        localStorage.removeItem('deliveryAddress');\n        localStorage.removeItem('datetime');\n        localStorage.removeItem('couponadded');\n        this.router.navigate(['']);\n      }\n    });\n  }\n\n  async createOrder(payMethod, payKey) {\n    //////////// new\n    //////////// new\n\n    const storeId = [...new Set(this.cart.cart.map(item => item.store_id))];\n    const orderStatus = [];\n    storeId.forEach(element => {\n      const info = {\n        id: element,\n        status: 'created'\n      };\n      orderStatus.push(info);\n    });\n    const notes = [\n      {\n        status: 1,\n        value: 'Order Created',\n        time: moment().format('lll'),\n      }\n    ];\n    this.cart.deliveryAt = this.cart.deliveryAt ? this.cart.deliveryAt : '';\n    const param = {\n      uid: localStorage.getItem('uid'),\n      store_id: storeId.join(),\n      date_time: this.cart.datetime === 'today' ? moment().format('YYYY-MM-DD HH:mm:ss') : moment().add(1, 'days').format('YYYY-MM-DD HH:mm:ss'),\n      paid_method: payMethod,\n      order_to: this.cart.deliveryAt,\n      orders: JSON.stringify(this.cart.cart),\n      notes: JSON.stringify(notes),\n      address: this.cart.deliveryAt === 'home' ? JSON.stringify(this.cart.deliveryAddress) : '',\n      driver_id: '',\n      total: this.cart.totalPrice,\n      tax: this.cart.orderTax,\n      grand_total: this.cart.grandTotal,\n      delivery_charge: this.cart.deliveryPrice,\n      coupon_code: this.cart.coupon ? JSON.stringify(this.cart.coupon) : '',\n      discount: this.cart.discount,\n      pay_key: payKey,\n      status: JSON.stringify(orderStatus),\n      assignee: ''\n    };\n\n    console.log('param----->', param);\n\n    this.util.start();\n    this.api.post('orders/save', param).subscribe((data: any) => {\n      console.log(data);\n      this.util.stop();\n      localStorage.removeItem('payTMOrderID');\n      localStorage.removeItem('deliveryAt');\n      localStorage.removeItem('deliveryAddress');\n      localStorage.removeItem('datetime');\n      localStorage.removeItem('couponadded');\n      this.api.createOrderNotification(this.cart.stores);\n      this.cart.clearCart();\n      this.util.publishNewOrder();\n      this.router.navigate(['orders']);\n    }, error => {\n      console.log(error);\n      this.util.stop();\n      this.util.toast('error', this.util.getString('Error'), this.util.getString('Something went wrong'));\n    });\n  }\n\n  ngOnInit(): void {\n  }\n\n}\n","<!--\n   Authors : initappz (Rahul Jograna)\n  Website : https://initappz.com/\n  App Name : ionic 5 groceryee app\n  Created : 10-Sep-2020\n  This App Template Source code is licensed as per the\n  terms found in the Website https://initappz.com/license\n  Copyright and Good Faith Purchasers © 2020-present initappz.\n -->\n<div class=\"container\">\n  <div class=\"centered\">\n    <h2 *ngIf=\"status ==='failure'\"> {{util.getString('Transaction status is failure')}} </h2>\n    <h2 *ngIf=\"status ==='success'\"> {{util.getString('Your payment was successful done, thank you for purchase.')}}\n    </h2>\n  </div>\n</div>\n","/*\n  Authors : initappz (Rahul Jograna)\n  Website : https://initappz.com/\n  App Name : ionic 5 groceryee app\n  Created : 10-Sep-2020\n  This App Template Source code is licensed as per the\n  terms found in the Website https://initappz.com/license\n  Copyright and Good Faith Purchasers © 2020-present initappz.\n*/\nimport { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { PaytmcallbackRoutingModule } from './paytmcallback-routing.module';\nimport { PaytmcallbackComponent } from './paytmcallback.component';\n\n\n@NgModule({\n  declarations: [PaytmcallbackComponent],\n  imports: [\n    CommonModule,\n    PaytmcallbackRoutingModule\n  ]\n})\nexport class PaytmcallbackModule { }\n"]}