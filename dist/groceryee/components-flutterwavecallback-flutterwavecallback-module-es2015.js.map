{"version":3,"sources":["./src/app/components/flutterwavecallback/flutterwavecallback-routing.module.ts","./src/app/components/flutterwavecallback/flutterwavecallback.component.ts","./src/app/components/flutterwavecallback/flutterwavecallback.component.html","./src/app/components/flutterwavecallback/flutterwavecallback.module.ts"],"names":[],"mappings":"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","file":"components-flutterwavecallback-flutterwavecallback-module-es2015.js","sourcesContent":["/*\n  Authors : initappz (Rahul Jograna)\n  Website : https://initappz.com/\n  App Name : ionic 5 groceryee app\n  Created : 10-Sep-2020\n  This App Template Source code is licensed as per the\n  terms found in the Website https://initappz.com/license\n  Copyright and Good Faith Purchasers © 2020-present initappz.\n*/\nimport { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\nimport { FlutterwavecallbackComponent } from './flutterwavecallback.component';\n\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: FlutterwavecallbackComponent\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class FlutterwavecallbackRoutingModule { }\n","/*\n  Authors : initappz (Rahul Jograna)\n  Website : https://initappz.com/\n  App Name : ionic 5 groceryee app\n  Created : 10-Sep-2020\n  This App Template Source code is licensed as per the\n  terms found in the Website https://initappz.com/license\n  Copyright and Good Faith Purchasers © 2020-present initappz.\n*/\nimport { Component, OnInit } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { CartService } from 'src/app/services/cart.service';\nimport { UtilService } from 'src/app/services/util.service';\nimport { ApiService } from 'src/app/services/api.service';\nimport * as moment from 'moment';\n@Component({\n  selector: 'app-flutterwavecallback',\n  templateUrl: './flutterwavecallback.component.html',\n  styleUrls: ['./flutterwavecallback.component.scss']\n})\nexport class FlutterwavecallbackComponent implements OnInit {\n\n  constructor(\n    private route: ActivatedRoute,\n    public api: ApiService,\n    public util: UtilService,\n    public cart: CartService,\n    private router: Router\n  ) {\n    this.route.queryParams.subscribe((data) => {\n      console.log(data);\n      if (data && data.status === 'successful') {\n        console.log(data.transaction_id);\n        console.log(localStorage.getItem('payTMOrderID'));\n        console.log('deliveryAddress===============', localStorage.getItem('deliveryAddress'));\n        this.cart.deliveryAt = localStorage.getItem('deliveryAt');\n        this.cart.datetime = localStorage.getItem('datetime');\n        console.log('date time->>>', this.cart.datetime);\n        console.log('cart--->>>', this.cart.deliveryAt, localStorage.getItem('deliveryAt'));\n        if (this.cart.deliveryAt === 'home') {\n          this.cart.deliveryAddress = JSON.parse(localStorage.getItem('deliveryAddress'));\n        }\n        const couponadded = localStorage.getItem('couponadded');\n        console.log('couponaddedcouponaddedcouponaddedcouponaddedcouponaddedcouponadded', couponadded);\n        if (couponadded && couponadded !== 'undefined' && couponadded !== undefined) {\n          this.cart.coupon = JSON.parse(couponadded);\n        }\n        this.cart.calcuate();\n        this.createOrder('flutterwave', data.transaction_id);\n      } else {\n        localStorage.removeItem('payTMOrderID');\n        localStorage.removeItem('deliveryAt');\n        localStorage.removeItem('deliveryAddress');\n        localStorage.removeItem('datetime');\n        localStorage.removeItem('couponadded');\n        this.router.navigate(['']);\n      }\n    });\n  }\n\n  ngOnInit(): void {\n  }\n\n  async createOrder(payMethod, payKey) {\n    //////////// new\n    //////////// new\n\n    const storeId = [...new Set(this.cart.cart.map(item => item.store_id))];\n    const orderStatus = [];\n    storeId.forEach(element => {\n      const info = {\n        id: element,\n        status: 'created'\n      };\n      orderStatus.push(info);\n    });\n    const notes = [\n      {\n        status: 1,\n        value: 'Order Created',\n        time: moment().format('lll'),\n      }\n    ];\n    this.cart.deliveryAt = this.cart.deliveryAt ? this.cart.deliveryAt : '';\n    const param = {\n      uid: localStorage.getItem('uid'),\n      store_id: storeId.join(),\n      date_time: this.cart.datetime === 'today' ? moment().format('YYYY-MM-DD HH:mm:ss') : moment().add(1, 'days').format('YYYY-MM-DD HH:mm:ss'),\n      paid_method: payMethod,\n      order_to: this.cart.deliveryAt,\n      orders: JSON.stringify(this.cart.cart),\n      notes: JSON.stringify(notes),\n      address: this.cart.deliveryAt === 'home' ? JSON.stringify(this.cart.deliveryAddress) : '',\n      driver_id: '',\n      total: this.cart.totalPrice,\n      tax: this.cart.orderTax,\n      grand_total: this.cart.grandTotal,\n      delivery_charge: this.cart.deliveryPrice,\n      coupon_code: this.cart.coupon ? JSON.stringify(this.cart.coupon) : '',\n      discount: this.cart.discount,\n      pay_key: payKey,\n      status: JSON.stringify(orderStatus),\n      assignee: ''\n    };\n\n    console.log('param----->', param);\n\n    this.util.start();\n    this.api.post('orders/save', param).subscribe((data: any) => {\n      console.log(data);\n      this.util.stop();\n      localStorage.removeItem('payTMOrderID');\n      localStorage.removeItem('deliveryAt');\n      localStorage.removeItem('deliveryAddress');\n      localStorage.removeItem('datetime');\n      localStorage.removeItem('couponadded');\n      this.api.createOrderNotification(this.cart.stores);\n      this.cart.clearCart();\n      this.util.publishNewOrder();\n      this.router.navigate(['orders']);\n    }, error => {\n      console.log(error);\n      this.util.stop();\n      this.util.toast('error', this.util.getString('Error'), this.util.getString('Something went wrong'));\n    });\n  }\n}\n","<!--\n   Authors : initappz (Rahul Jograna)\n  Website : https://initappz.com/\n  App Name : ionic 5 groceryee app\n  Created : 10-Sep-2020\n  This App Template Source code is licensed as per the\n  terms found in the Website https://initappz.com/license\n  Copyright and Good Faith Purchasers © 2020-present initappz.\n -->\n<h2 style=\"text-align: center;\"> {{util.getString('Please wait, we are processing your order')}} </h2>\n","/*\n  Authors : initappz (Rahul Jograna)\n  Website : https://initappz.com/\n  App Name : ionic 5 groceryee app\n  Created : 10-Sep-2020\n  This App Template Source code is licensed as per the\n  terms found in the Website https://initappz.com/license\n  Copyright and Good Faith Purchasers © 2020-present initappz.\n*/\nimport { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { FlutterwavecallbackRoutingModule } from './flutterwavecallback-routing.module';\nimport { FlutterwavecallbackComponent } from './flutterwavecallback.component';\n\n\n@NgModule({\n  declarations: [FlutterwavecallbackComponent],\n  imports: [\n    CommonModule,\n    FlutterwavecallbackRoutingModule\n  ]\n})\nexport class FlutterwavecallbackModule { }\n"],"sourceRoot":"webpack:///"}