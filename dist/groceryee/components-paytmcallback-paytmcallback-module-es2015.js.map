{"version":3,"sources":["./src/app/components/paytmcallback/paytmcallback-routing.module.ts","./src/app/components/paytmcallback/paytmcallback.component.ts","./src/app/components/paytmcallback/paytmcallback.component.html","./src/app/components/paytmcallback/paytmcallback.module.ts"],"names":[],"mappings":"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","file":"components-paytmcallback-paytmcallback-module-es2015.js","sourcesContent":["/*\n  Authors : initappz (Rahul Jograna)\n  Website : https://initappz.com/\n  App Name : ionic 5 groceryee app\n  Created : 10-Sep-2020\n  This App Template Source code is licensed as per the\n  terms found in the Website https://initappz.com/license\n  Copyright and Good Faith Purchasers © 2020-present initappz.\n*/\nimport { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\nimport { PaytmcallbackComponent } from './paytmcallback.component';\n\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: PaytmcallbackComponent\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class PaytmcallbackRoutingModule { }\n","/*\n  Authors : initappz (Rahul Jograna)\n  Website : https://initappz.com/\n  App Name : ionic 5 groceryee app\n  Created : 10-Sep-2020\n  This App Template Source code is licensed as per the\n  terms found in the Website https://initappz.com/license\n  Copyright and Good Faith Purchasers © 2020-present initappz.\n*/\nimport { Component, OnInit } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { ApiService } from 'src/app/services/api.service';\nimport { UtilService } from 'src/app/services/util.service';\nimport { CartService } from 'src/app/services/cart.service';\nimport * as moment from 'moment';\n@Component({\n  selector: 'app-paytmcallback',\n  templateUrl: './paytmcallback.component.html',\n  styleUrls: ['./paytmcallback.component.scss']\n})\nexport class PaytmcallbackComponent implements OnInit {\n  status: any;\n  constructor(\n    private route: ActivatedRoute,\n    public api: ApiService,\n    public util: UtilService,\n    public cart: CartService,\n    private router: Router\n  ) {\n    this.route.queryParams.subscribe((data: any) => {\n      console.log(data);\n      this.status = data.status;\n      if (data && data.status === 'success') {\n        console.log(localStorage.getItem('payTMOrderID'));\n        console.log('deliveryAddress===============', localStorage.getItem('deliveryAddress'));\n        this.cart.deliveryAt = localStorage.getItem('deliveryAt');\n        this.cart.datetime = localStorage.getItem('datetime');\n        console.log('date time->>>', this.cart.datetime);\n        console.log('cart--->>>', this.cart.deliveryAt, localStorage.getItem('deliveryAt'));\n        if (this.cart.deliveryAt === 'home') {\n          this.cart.deliveryAddress = JSON.parse(localStorage.getItem('deliveryAddress'));\n        }\n        const couponadded = localStorage.getItem('couponadded');\n        console.log('couponaddedcouponaddedcouponaddedcouponaddedcouponaddedcouponadded', couponadded);\n        if (couponadded && couponadded !== 'undefined' && couponadded !== undefined) {\n          this.cart.coupon = JSON.parse(couponadded);\n        }\n        this.cart.calcuate();\n        this.createOrder('paytm', localStorage.getItem('payTMOrderID'));\n      } else {\n        localStorage.removeItem('payTMOrderID');\n        localStorage.removeItem('deliveryAt');\n        localStorage.removeItem('deliveryAddress');\n        localStorage.removeItem('datetime');\n        localStorage.removeItem('couponadded');\n        this.router.navigate(['']);\n      }\n    });\n  }\n\n  async createOrder(payMethod, payKey) {\n    //////////// new\n    //////////// new\n\n    const storeId = [...new Set(this.cart.cart.map(item => item.store_id))];\n    const orderStatus = [];\n    storeId.forEach(element => {\n      const info = {\n        id: element,\n        status: 'created'\n      };\n      orderStatus.push(info);\n    });\n    const notes = [\n      {\n        status: 1,\n        value: 'Order Created',\n        time: moment().format('lll'),\n      }\n    ];\n    this.cart.deliveryAt = this.cart.deliveryAt ? this.cart.deliveryAt : '';\n    const param = {\n      uid: localStorage.getItem('uid'),\n      store_id: storeId.join(),\n      date_time: this.cart.datetime === 'today' ? moment().format('YYYY-MM-DD HH:mm:ss') : moment().add(1, 'days').format('YYYY-MM-DD HH:mm:ss'),\n      paid_method: payMethod,\n      order_to: this.cart.deliveryAt,\n      orders: JSON.stringify(this.cart.cart),\n      notes: JSON.stringify(notes),\n      address: this.cart.deliveryAt === 'home' ? JSON.stringify(this.cart.deliveryAddress) : '',\n      driver_id: '',\n      total: this.cart.totalPrice,\n      tax: this.cart.orderTax,\n      grand_total: this.cart.grandTotal,\n      delivery_charge: this.cart.deliveryPrice,\n      coupon_code: this.cart.coupon ? JSON.stringify(this.cart.coupon) : '',\n      discount: this.cart.discount,\n      pay_key: payKey,\n      status: JSON.stringify(orderStatus),\n      assignee: ''\n    };\n\n    console.log('param----->', param);\n\n    this.util.start();\n    this.api.post('orders/save', param).subscribe((data: any) => {\n      console.log(data);\n      this.util.stop();\n      localStorage.removeItem('payTMOrderID');\n      localStorage.removeItem('deliveryAt');\n      localStorage.removeItem('deliveryAddress');\n      localStorage.removeItem('datetime');\n      localStorage.removeItem('couponadded');\n      this.api.createOrderNotification(this.cart.stores);\n      this.cart.clearCart();\n      this.util.publishNewOrder();\n      this.router.navigate(['orders']);\n    }, error => {\n      console.log(error);\n      this.util.stop();\n      this.util.toast('error', this.util.getString('Error'), this.util.getString('Something went wrong'));\n    });\n  }\n\n  ngOnInit(): void {\n  }\n\n}\n","<!--\n   Authors : initappz (Rahul Jograna)\n  Website : https://initappz.com/\n  App Name : ionic 5 groceryee app\n  Created : 10-Sep-2020\n  This App Template Source code is licensed as per the\n  terms found in the Website https://initappz.com/license\n  Copyright and Good Faith Purchasers © 2020-present initappz.\n -->\n<div class=\"container\">\n  <div class=\"centered\">\n    <h2 *ngIf=\"status ==='failure'\"> {{util.getString('Transaction status is failure')}} </h2>\n    <h2 *ngIf=\"status ==='success'\"> {{util.getString('Your payment was successful done, thank you for purchase.')}}\n    </h2>\n  </div>\n</div>\n","/*\n  Authors : initappz (Rahul Jograna)\n  Website : https://initappz.com/\n  App Name : ionic 5 groceryee app\n  Created : 10-Sep-2020\n  This App Template Source code is licensed as per the\n  terms found in the Website https://initappz.com/license\n  Copyright and Good Faith Purchasers © 2020-present initappz.\n*/\nimport { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { PaytmcallbackRoutingModule } from './paytmcallback-routing.module';\nimport { PaytmcallbackComponent } from './paytmcallback.component';\n\n\n@NgModule({\n  declarations: [PaytmcallbackComponent],\n  imports: [\n    CommonModule,\n    PaytmcallbackRoutingModule\n  ]\n})\nexport class PaytmcallbackModule { }\n"],"sourceRoot":"webpack:///"}